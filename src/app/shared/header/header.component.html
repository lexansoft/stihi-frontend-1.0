<!-- HEADER -->
<header class="header">
  <div class="header__top">
    <div class="container">
      <div class="header__inner">
        <div class="header__left">
          <!-- LOGO -->
          <a class="logo" routerLink="/">
            <img class="logo__img" src="/frontend_assets_stihi/svg/logo.svg" alt="">
          </a>
          <!-- /LOGO -->
        </div>
        <div class="header__right">

          <!-- AUTH -->
          <div class="auth" *ngIf="userId == 0">
            <a class="auth__signin js-form-popup" href="#p-log" (click)="mode = 0">Войти</a>
            <a class="auth__signup " href="javascript:void(0)" (click)="openSignup()">Регистрация</a>
          </div>

          <div class="header__user-panel" *ngIf="true || userId > 0">
            <!-- USER PANEL -->
            <div class="user-panel">
              <div class="user-panel__left" *ngIf="userId > 0">
                <div class="user-panel__left-top">
                  <div class="user-panel__name">{{user.displayName}}</div>
                  
                  <div class="ui dropdown pointing top right header__main-menu header__main-menu-bell"  *ngIf="false || TODO">
                    <!-- BELL BTN -->
                    <button class="default bell-btn bell-btn--notification">
                      <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
                        <g>
                          <path class="bell-btn__cls-1" d="M89.31 225.26s12.67 26 38.68 26 34.33-25.2 34.33-25.2M108.48 32.35s-2.3-25.82 18.18-25.82 19.12 25.19 19.12 25.19"
                          />
                          <path class="bell-btn__cls-1" d="M202.36 157.75c.89-26.46.72-53.72.57-66.15a40.29 40.29 0 0 0-3.5-16C192.59 60.33 174.24 31 134 30.76l-11.4.3c-40.34 0-58.87 29.34-65.76 44.55a39.82 39.82 0 0 0-3.55 15.72c-.23 12.37-.58 39.73.15 66.28C45.6 191.94 32.36 202.24 24 215c4 2.76 10.48 3.2 15.13 4 9.11 1.59 18.29 2.74 27.47 3.82C76.7 224 86.8 225 96.9 226a360.7 360.7 0 0 0 39.43 1.94c13.28-.19 26.42-1.9 39.6-3.42l12-1.39c8.46-1 16.92-2 25.33-3.35 5.38-.86 11.18-1.55 16.29-3.56a14.28 14.28 0 0 0 1.84-.89c-8.22-12.81-21.39-23.2-29.03-57.58z"
                          />
                          <path d="M76 98.25S88.28 36 153.52 60" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="8"
                          />
                        </g>
                      </svg>
                    </button>
                    <!-- /BELL BTN -->
                    <div class="menu dropdown-menu header__main-menu-menu header__main-menu-menu-bell">
                      <div class="item dropdown-menu__main-bell">Новых уведомлений 10</div>
                      <div class="item dropdown-menu__main-bell">@robot перевел вам 0,001 GBR</div>
                      <div class="item dropdown-menu__main-bell">@robot перевел вам 0,001 GBR</div>
                      <div class="item dropdown-menu__main-bell">@robot перевел вам 0,001 GBR</div>
                      <div class="item dropdown-menu__main-bell">@robot перевел вам 0,001 GBR</div>
                      <div class="item dropdown-menu__main-bell">@robot перевел вам 0,001 GBR</div>
                      <div class="item dropdown-menu__main-bell">
                        <a class="dropdown-menu__main-bell-link" href="#">Отметить как прочитанные</a>
                        <div class="dropdown-menu__main-bell-arrow">
                          <!-- ARROW -->
                          <a class="arrow" href="javascript:void(0)"></a>
                          <!-- /ARROW -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="user-panel__left-bottom">
                  <div class="user-panel__left-bottom-load-line">
                    <!-- LOAD LINE -->
                    <div class="load-line" [ngClass]="{'battery80': user.battery_value <= 80 &&  user.battery_value > 70, 'battery70': user.battery_value <= 70}">
                      <div class="load-line__text">{{user?.battery_value}} % энергии</div>
                      <div [style.width]="user.battery_value+'%'" class="load-line__line" [ngClass]="{'battery70': user.battery_value <= 70}">
                        <div class="load-line__text2">{{user?.battery_value}} % энергии</div>
                      </div>
                    </div>
                    <!-- /LOAD LINE -->
                  </div>
                </div>
              </div>
              <div class="user-panel__right">
                <div class="ui dropdown pointing top right avatar-menu"  *ngIf="userId > 0">
                  <!-- AVATAR -->
                  <div class="avatar default">
                    <img class="avatar__avatar" src="{{user.avatar}}" alt="" *ngIf="user.avatar && user.avatar.length > 5">
                    <img class="avatar__avatar" src="/frontend_assets_stihi/img/avatar_default.png" alt="" *ngIf="!user.avatar || user.avatar.length < 5">
                  </div>
                  <!-- /AVATAR -->
                  <div class="menu av avatar-menu__menu">
                    <div class="av__header" style="display: none">₽ 810</div>
                    <div class="item av__avatar-menu" routerLink="/@{{login}}">Блог</div>
                    <div class="item av__avatar-menu" routerLink="/@{{login}}/comments">Комментарии</div>
                    <div class="item av__avatar-menu" routerLink="/@{{login}}/wallets">Кошелек</div>
                    <div class="item av__avatar-menu" routerLink="/@{{login}}/settings">Настройки</div>
                    <div class="item av__avatar-menu" (click)="logOut();">Выйти</div>
                  </div>
                </div>
                <div class="header__menu-btn">
                  <button class="menu-btn default js-menu-open">
                    <span class="menu-btn__span"></span>
                    <span class="menu-btn__span"></span>
                    <span class="menu-btn__span"></span>
                  </button>
                </div>
              </div>
            </div>
            <!-- USER PANEL -->
          </div>

          <div class="header__right-search-btn"  *ngIf="false || TODO">
            <!-- SEARCH BTN -->
            <button data-show="#search-field" class="js-search-show search-btn search-btn--border-none">
              <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
                <circle class="search-btn__cls" cx="104.38" cy="103.83" r="91" />
                <path class="search-btn__cls" d="M238.62 242.5l-72.12-72.13" />
              </svg>
            </button>
            <!-- /SEARCH BTN -->
          </div>
          <!-- /AUTH -->
        </div>
      </div>
    </div>
  </div>
  <div class="header__bottom">
    <div class="container">
      <div class="header__bottom-inner">
        <div class="header__bottom-mobile-menu">
          <select class="js-example-basic-single" name="state"  id="mobile_navigation">
            <option value="/authors">Авторы</option>
            <option value="/posts/feed"  *ngIf="userId > 0">Лента</option>
            <option value="/posts/new">Новое</option>
            <option value="/posts/actual">Актуальное</option>
            <option value="/posts/popular">Лидеры</option>
            <option value="/posts/comments">Комментарии</option>
            <option value="/outbound/news">Новости</option>
          </select>
        </div>

        <div class="header__nav">
          <!-- NAV -->
          <nav class="nav">
            <ul class="nav__ul">
              <li class="nav__li" routerLinkActive="nav__li--active" *ngIf="false">
                <a [routerLink]="['', {outlets: { popup: 'pages/about' } } ]" class="nav__a">О нас</a>
              </li>
              <li class="nav__li" routerLinkActive="nav__li--active">
                <a routerLink="/authors" class="nav__a">Авторы</a>
              </li>
              <li class="nav__li" routerLinkActive="nav__li--active"  *ngIf="userId > 0">
                <a routerLink="/posts/feed" class="nav__a">Лента</a>
              </li>
              <li class="nav__li" routerLinkActive="nav__li--active">
                <a routerLink="/posts/new" class="nav__a">Новое</a>
              </li>
              <li class="nav__li" routerLinkActive="nav__li--active">
                <a routerLink="/posts/actual" class="nav__a">Актуальное</a>
              </li>
              <li class="nav__li" routerLinkActive="nav__li--active">
                <a routerLink="/posts/popular" class="nav__a">Лидеры</a>
              </li>
              <li class="nav__li" routerLinkActive="nav__li--active">
                <a routerLink="/posts/comments" class="nav__a">Комментарии</a>
              </li>
              <li class="nav__li" routerLinkActive="nav__li--active">
                <a href="https://stihi.io/@stihi-io" class="nav__a" target="_blank">Новости</a>
              </li>
              <li class="nav__li" routerLinkActive="nav__li--active" *ngIf="this.userRole == 'a'">
                <a routerLink="/admin/users" class="nav__a">Администратор</a>
              </li>
            </ul>
          </nav>
          <!-- /NAV -->
        </div>
        <div class="header__bottom-right">
          <div class="header__bottom-right-drop">

            <select class="js-example-basic-single" name="state" id="global_category">
              <option value="Все рубрики" title="Все рубрики">Все рубрики</option>
              <option value="{{o.name}}" title="{{o.name}}" *ngFor="let o of categories">{{o.name}}</option>
            </select>

          </div>
          <!-- SEARCH -->
          <div class="search"  *ngIf="false || TODO">
            <!-- SEARCH BTN -->
            <button data-show="#search-field" class="js-search-show search-btn">
              <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
                <circle class="search-btn__cls" cx="104.38" cy="103.83" r="91" />
                <path class="search-btn__cls" d="M238.62 242.5l-72.12-72.13" />
              </svg>
            </button>
            <!-- /SEARCH BTN -->
            <div id="search-field" class="search__field">
              <form action="" method="post">
                <!-- INPUT -->
                <div class="input">
                  <input class="input__input" placeholder="Найти..." type="text" [(ngModel)]="searchQuery" name="search_query">
                </div>
                <!-- /INPUT -->
                <div class="search__btn">
                  <!-- SEARCH BTN -->
                  <button class="search-btn search-btn--border-none">
                    <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
                      <circle class="search-btn__cls" cx="104.38" cy="103.83" r="91" />
                      <path class="search-btn__cls" d="M238.62 242.5l-72.12-72.13" />
                    </svg>
                  </button>
                  <!-- /SEARCH BTN -->
                </div>
              </form>
            </div>
          </div>
          <!-- /SEARCH -->
          <div class="edit-btn" *ngIf="userId > 0" routerLink="/posts/0/edit">
            <button class="edit-btn__btn">
              <svg viewBox="-1 6 32 20" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.5555556,10.7003165 L21.9259259,13.0706869 L22.6627455,12.3338673 C22.910371,12.0862418 22.910371,11.6847616 22.6627455,11.4371361 L21.1891063,9.96349689 C20.9414809,9.71587141 20.5400006,9.71587141 20.2923752,9.96349689 L19.5555556,10.7003165 Z M18.8571429,11.2929091 L11.015873,19.1341789 L9.77777778,22.8484646 L13.0793651,22.0230678 L21.3333333,13.7690995 L20.5079365,12.9437027 L12.6666667,20.7849726 L11.4285714,21.197671 L11.8412698,19.9595757 L19.6825397,12.1183059 L18.8571429,11.2929091 Z" id="icon-svg" style="
                  fill: #33a8b9;
              "></path>
              </svg>
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>
</header>
<!-- /HEADER -->

<!-- POPUP LOG -->
<form (submit)="auth()">

<div id="p-log" class="popup-small mfp-hide">
  <div class="popup-small__header">
    <div class="popup-small__title">Войти</div>
  </div>
  <div class="popup-small__body">
      <div class="popup-small__item">
        <div class="popup-small__item-label">Логин</div>
        <!-- INPUT -->
        <div class="input">
          <input class="input__input" type="text" [(ngModel)]="object.name" name="object_name_signin">
        </div>
        <!-- /INPUT -->
      </div>
      <div class="popup-small__item">
        <div class="popup-small__item-label">Приватный постинг ключ или пароль</div>
        <!-- INPUT -->
        <div class="input">
          <input class="input__input" type="password" [(ngModel)]="object.password" name="object_password_signin" style="font-size: 13px!important">
        </div>
        <!-- /INPUT -->
      </div>
      <div class="popup-small__item popup-small__item--margin-large" style="text-align: center;margin:2px;">
        <span style="color:#33a8b9">Stihi.io не хранит Ваши ключи</span>
      </div>
      <div class="popup-small__item popup-small__item--margin-large" style="margin-top: 4px;">
        <!-- CHECKBOX -->
        <div class="checkbox">
          <input type="checkbox" class="checkbox__input" id="checkbox59" />
          <label class="checkbox__label checkbox__label--size-small" for="checkbox59">Оставить меня залогиненым</label>
        </div>
        <!-- /CHECKBOX -->

      </div>
      <div class="popup-small__item-btns">
        <div class="popup-small__item-btns-btn">
          <!-- BTN DEFAULT -->
          <a class="btn-default btn-default--xsmall btn-default--min-width-150" href="javascript:void(0)" (click)="auth();">войти</a>
          <!-- /BTN DEFAULT -->
        </div>
        <div class="popup-small__item-btns-btn">
          <!-- BTN DEFAULT -->
          <a class="btn-secondary btn-secondary--small btn-default--min-width-150" onClick="$.magnificPopup.close()" href="javascript:void(0)">отмена</a>
          <!-- /BTN DEFAULT -->
        </div>
      </div>
  </div>
</div>
<!-- END POPUP log -->

<!-- POPUP REG -->
<div id="p-reg" class="popup-small mfp-hide" style="margin-top:10px;">
  <div class="" *ngIf="isRegChoice">
    <div class="popup-small__header">
    У Вас есть аккаунт в Golos.io?
    </div>
    <div class="popup-small__item-btns" style="text-align:center;">

    <div class="popup-small__item-btns-btn">
      <!-- BTN DEFAULT -->
      <a class="btn-secondary btn-secondary--small btn-default--min-width-150" href="javascript:void(0)" (click)="authForm()">Да</a>
      <!-- /BTN DEFAULT -->
    </div>
    <div class="popup-small__item-btns-btn">
      <!-- BTN DEFAULT -->
      <a class="btn-secondary btn-secondary--small btn-default--min-width-150" href="javascript:void(0)" (click)="isRegChoice = false">Нет</a>
      <!-- /BTN DEFAULT -->
    </div>
    </div>
  </div>  
  <ng-container *ngIf="!isRegChoice">
    <div class="popup-small__header">
      <div class="popup-small__title">Регистрация</div>
    </div>
    <div class="popup-small__body" style="text-align:center;" *ngIf="disabledReg">
      <hr>
      <a routerLink="/">Stihi.io</a> работает в тестовом режиме.<br><br>
      Предлагаем Вам пройти регистрацию в системе<br><br>
      на <a href="https://golos.io/" target="_blank">GOLOS.IO</a><br><br>
      и авторизоваться у нас при помощи приватных постинг ключей, <span (click)="disabledReg = false">активного</span> ключа или пароля. Рекомендуем использовать активный ключ или пароль только в случае отсутствия постинг ключа.<br>
      <hr><br>
      <b style="color: #33a8b9">Stihi.io не хранит Ваши ключи</b>
    </div>
    <div class="popup-small__body" *ngIf="!disabledReg">
        <div class="popup-small__item">
          <div class="popup-small__item-label">Логин* (допустимые символы: a-z, 0-9, “-”)</div>
          <!-- INPUT -->
          <div class="input">
            <input class="input__input" type="text" [(ngModel)]="object.name" name="object_name_signup">
          </div>
          <!-- /INPUT -->
        </div>
        <div class="popup-small__item">
          <div class="popup-small__item-label">Отображаемое имя (псевдоним)*</div>
          <!-- INPUT -->
          <div class="input">
            <input class="input__input" type="text" [(ngModel)]="object.nickname" name="object_nickname_signup">
          </div>
          <!-- /INPUT -->
        </div>
        <div class="popup-small__item">
          <div class="popup-small__item-label">E-mail</div>
          <!-- INPUT -->
          <div class="input">
            <input class="input__input" type="text" [(ngModel)]="object.email" name="object_email">
          </div>
          <!-- /INPUT -->
          <div class="popup-small__item-input-desc">Используется для сброса пароля в случае если аккаунт был украден</div>
        </div>

        <div class="popup-small__item">
          <!-- INPUT -->
          <div class="input">
            <img src="/api/v2/captcha/{{captcha_id}}.png">
            <br>
            <div class="popup-small__item-label">Введите код с картинки</div>
            <br>
            <input class="input__input" type="text" [(ngModel)]="captcha_input" name="object_captcha_input">
          </div>
          <!-- /INPUT -->
        </div>

        <div class="popup-small__item">
          <button class="btn-secondary" type="button" (click)="confirmCode();">Подтвердить код</button>
        </div>

        <ng-container>

        <div class="popup-small__item">
          <div class="popup-small__item-label">Сгенерированный пароль</div>
          <!-- INPUT -->
          <div class="input">
            <input class="input__input" type="text" readonly="readonly"  [(ngModel)]="password" name="object_password_signup"  style="font-size: 13px!important">
          </div>
          <!-- /INPUT -->
        </div>
        <div class="popup-small__item">
          <div class="popup-small__item-warn">ОБЯЗАТЕЛЬНО СОХРАНИТЕ ПАРОЛЬ В ТЕКСТОВОМ ФАЙЛЕ ИЛИ СДЕЛАЙТЕ КОПИЮ В МЕНЕДЖЕРЕ ПАРОЛЕЙ
          </div>
        </div>
          <!--
        <div class="popup-small__item-storage-pass">
          <a class="popup-small__item-storage-a" href="https://google.com/" target="_blank">Показать правила хранения пароля</a>
        </div>
        -->
        <div class="popup-small__item">
          <div class="popup-small__item-label">Введите сгенерированный пароль</div>
          <!-- INPUT -->
          <div class="input">
            <input class="input__input" type="text" [(ngModel)]="password_confirm" name="object_password_confirm_signup" style="font-size: 13px!important">
          </div>
          <!-- /INPUT -->
        </div>

        <div class="popup-small__item">
          <!-- CHECKBOX -->
          <div class="checkbox">
            <input type="checkbox" class="checkbox__input" id="checkbox4" [(ngModel)]="object.is_agree_cant_recover"  name="object_recover_signup"/>
            <label class="checkbox__label checkbox__label--size-small" for="checkbox4">Я понимаю, что Stihi.io не может восстановить потерянный пароль
            </label>
          </div>
          <!-- /CHECKBOX -->
        </div>
        <div class="popup-small__item" >
          <!-- CHECKBOX -->
          <div class="checkbox">
            <input type="checkbox" class="checkbox__input" id="checkbox55" [(ngModel)]="object.is_saved"  name="object_saved_signup"/>
            <label class="checkbox__label checkbox__label--size-small" for="checkbox55">Я надежно сохранил сгенерированный пароль</label>
          </div>
          <!-- /CHECKBOX -->
        </div>
        <div class="popup-small__item">
          <!-- CHECKBOX -->
          <div class="checkbox">
            <input type="checkbox" class="checkbox__input" id="checkbox56" [(ngModel)]="object.is_agree_tos"  name="object_tos_signup"/>
            <label class="checkbox__label checkbox__label--size-small" for="checkbox56">Я прочитал и согласен с
              <a [routerLink]="['', {outlets: { popup: 'pages/tos' } } ]" target="_blank">Пользовательским Соглашением</a>
            </label>
          </div>
          <!-- /CHECKBOX -->
        </div>

        </ng-container>

        <div class="popup-small__item-btn">
          <!-- BTN DEFAULT -->
          <a class="btn-default btn-default--small" [ngClass]="{'not-active': password != password_confirm || !object.is_agree_tos || !object.is_saved || !object.is_agree_cant_recover}" href="javascript:void(0)" (click)="auth();">регистрация</a>

          <!-- /BTN DEFAULT -->
          <div class="popup-small__item-btn-right">
          <!-- BTN SECONDARY -->
          <button class="btn-secondary" onClick="$.magnificPopup.close()">отмена</button>
          <!-- /BTN SECONDARY -->
          </div>
        </div>
    </div>  
  </ng-container>
  
</div>
</form>

<!-- END POPUP REG -->

<div id="p-empty-nickname" class="popup mfp-hide">
  <!-- PRIVACY -->
  <div class="privacy">
    <div class="privacy__header">Сообщение </div>
    <div class="privacy__body">
      <p class="privacy__body-p">Отображаемое имя автора указывается при регистрации в форме регистрации.
<br><br>
        В любой момент Автор может изменить отображаемое имя в настройках.
      </p>
    </div>
  </div>
  <!-- /PRIVACY -->
  <div class="popup__slide-top">
    <a class="js-scroll-top page__footer-slide-top-link" href="#">К началу</a>
  </div>
</div>